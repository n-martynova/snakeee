(function(){"use strict";var e={1483:function(e,n,t){var o=t(9242),r=t(3396),i=t(4870),a=(0,r.aZ)({__name:"Menu",emits:["changeView"],setup(e,{emit:n}){return(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{class:"button",onClick:t[0]||(t[0]=e=>n("changeView","Game"))}," Начать игру "),(0,r._)("div",{class:"button",onClick:t[1]||(t[1]=e=>n("changeView","Records"))}," Таблица рекордов ")],64))}});const c=a;var d=c,s=t(7139);const u=e=>((0,r.dD)("data-v-216f2002"),e=e(),(0,r.Cn)(),e),l=u((()=>(0,r._)("h2",null,"Таблица рекордов",-1))),y={key:0,class:"records"},h={class:"record__index"},f={class:"record__date"},v={class:"record__score"},g={key:1,class:"records"};var w=(0,r.aZ)({__name:"Records",emits:["changeView"],setup(e,{emit:n}){const t=JSON.parse(localStorage.getItem("records"))||[];return(e,o)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[l,(0,i.SU)(t).length?((0,r.wg)(),(0,r.iD)("div",y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(t),((e,n)=>((0,r.wg)(),(0,r.iD)("div",{key:n,class:"record"},[(0,r._)("span",h,(0,s.zw)(n+1),1),(0,r._)("span",f,(0,s.zw)(e.date),1),(0,r._)("span",v,(0,s.zw)(e.score),1)])))),128))])):((0,r.wg)(),(0,r.iD)("div",g," Здесь пока пусто... ")),(0,r._)("div",{class:"button",onClick:o[0]||(o[0]=e=>n("changeView","Menu"))}," Главное меню ")],64))}}),m=t(89);const p=(0,m.Z)(w,[["__scopeId","data-v-216f2002"]]);var x=p,_=(t(7658),t(541),t(5670));const b={class:"game"},k={key:0,class:"game-over"},O={class:"score"};var D=(0,r.aZ)({__name:"Game",emits:["changeView"],setup(e,{emit:n}){const t=500,o=t,a=20,c=t/20,d={body:[],dx:c,dy:0,length:3},u={x:c*(a/2-1),y:c*(a/2-1)},l=new _.MxU({width:t,height:o,backgroundColor:16441065}),y=new _.W20,h=_.jyi.from(_.xEZ.WHITE),f=(0,i.iH)(0),v=(0,i.iH)(!1),g=(e,n)=>Math.floor(Math.random()*(n-e))+e,w=()=>{h.position={x:g(0,a)*c,y:g(0,a)*c},d.body.some((e=>e.x===h.position.x&&e.y===h.position.y))&&w()},m=()=>{h.width=c,h.height=c,h.tint=7066513,h.position={x:c*(a/2-1),y:c*(a/2-1)},l.stage.addChild(h),w()},p=()=>{u.x<0?u.x=t-c:u.x>=t&&(u.x=0),u.y<0?u.y=o-c:u.y>=o&&(u.y=0)},x=()=>{u.x===h.x&&u.y===h.y&&(d.length+=1,f.value+=1,w())},D=()=>{const e=JSON.parse(localStorage.getItem("records"))||[];e.push({date:new Intl.DateTimeFormat("ru-RU",{dateStyle:"short",timeStyle:"short"}).format(new Date),score:f.value}),e.length>1&&e.sort(((e,n)=>n.score-e.score)),localStorage.setItem("records",JSON.stringify(e.slice(0,10)))},S=()=>{d.body.slice(1).some((e=>e.x===u.x&&e.y===u.y))&&(l.ticker.stop(),v.value=!0,D(),setTimeout((()=>{n("changeView","Records")}),3e3))},C=()=>{let e;y.removeChildren(),u.x+=d.dx,u.y+=d.dy,p(),d.body.unshift({x:u.x,y:u.y}),d.body.length>d.length&&d.body.pop(),d.body.forEach((n=>{e=_.jyi.from(_.xEZ.WHITE),e.width=c,e.height=c,e.tint=16073342,e.position={x:n.x,y:n.y},y.addChild(e)})),l.stage.addChild(y),x(),S()},j=e=>{"ArrowLeft"!==e.code&&"KeyA"!==e.code||0!==d.dx?"ArrowUp"!==e.code&&"KeyW"!==e.code||0!==d.dy?"ArrowRight"!==e.code&&"KeyD"!==e.code||0!==d.dx?"ArrowDown"!==e.code&&"KeyS"!==e.code||0!==d.dy||(d.dy=c,d.dx=0):(d.dx=c,d.dy=0):(d.dy=-c,d.dx=0):(d.dx=-c,d.dy=0)};return(0,r.bv)((()=>{const e=document.querySelector(".game");e.appendChild(l.view),m(),l.ticker.maxFPS=10,l.ticker.add((()=>C())),document.addEventListener("keydown",j)})),(0,r.Jd)((()=>{document.removeEventListener("keydown",j)})),(e,n)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",b,[v.value?((0,r.wg)(),(0,r.iD)("div",k," Game Over :( ")):(0,r.kq)("",!0)]),(0,r._)("h2",O," СЧЁТ: "+(0,s.zw)(f.value),1)],64))}});const S=D;var C=S,j=(0,r.aZ)({__name:"App",setup(e){const n={Menu:d,Records:x,Game:C},t=(0,i.iH)("Menu"),a=(0,i.XI)(n[t.value]),c=e=>{t.value=e,a.value=n[e]};return(e,n)=>((0,r.wg)(),(0,r.j4)(o.uT,{name:"fade",mode:"out-in"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)("div",{key:t.value,class:"view"},[((0,r.wg)(),(0,r.j4)((0,r.LL)((0,i.SU)(a)),{onChangeView:c},null,32))]))])),_:1}))}});const H=j;var E=H;(0,o.ri)(E).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,i){if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var c=!0,d=0;d<o.length;d++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[d])}))?o.splice(d--,1):(c=!1,i<a&&(a=i));if(c){e.splice(u--,1);var s=r();void 0!==s&&(n=s)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,i,a=o[0],c=o[1],d=o[2],s=0;if(a.some((function(n){return 0!==e[n]}))){for(r in c)t.o(c,r)&&(t.m[r]=c[r]);if(d)var u=d(t)}for(n&&n(o);s<a.length;s++)i=a[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},o=self["webpackChunksnakeee"]=self["webpackChunksnakeee"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(1483)}));o=t.O(o)})();
//# sourceMappingURL=app.1305098f.js.map